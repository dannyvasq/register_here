
{% extends "base.html" %}
{%block title %}{{ recipe.title }}{% endblock %}
{% block content %}
    <h1>{{ recipe.title }}</h1>

    <p><strong>Description:</strong> {{ recipe.description }}</p>
    
    {% if recipe.ingredients %}
    <p><strong>Ingredients:</strong></p>
    <ul>
        {% for ingredient in recipe.ingredients.split('\n') %}
            <li>{{ ingredient }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    {% if recipe.instructions %}
    <p><strong>Instructions:</strong></p>
    <ol>
        {% for instruction in recipe.instructions.split('\n') %}
            <li>{{ instruction }}</li>
        {% endfor %}
    </ol>
    {% endif %}

    <p><strong>Created on:</strong> {{ recipe.created.strftime('%B %d, %Y at %I:%M %p') }}</p>
    {% if current_user.is_authenticated %}
        {% if current_user.id == recipe.user.id %}
            <!-- The owner sees Delete + Back to My Recipes + Logout -->
            <form action="{{ url_for('delete_recipe', id=recipe.id) }}" method="POST" style="display:inline;">
                <button type="submit">Delete Recipe</button>
            </form>    

            <nav>
                <ul>
                    <li><a href="{{ url_for('recipes') }}">Back to Recipes</a></li>
                    <li><a href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
             </nav>
    
    {% else %}
            <!-- Logged-in user but not the owner sees "See more recipes" + Logout -->
            <nav>
                <ul>
                    <li><a href="{{ url_for('user_recipes', user_id=recipe.user.id) }}">See more recipes from {{ recipe.user.username }}</a></li>
                    <li><a href="{{ url_for('logout') }}">Logout</a></li>
                </ul>
            </nav>
        {% endif %}
{% else %}
    <!-- Not logged in user -->
    <p style="margin-top: 20px; font-style: italic; color: gray;">
        You must <a href="{{ url_for('login') }}">login</a> to see more recipes.
    </p>
{% endif %}
{% endblock %}

